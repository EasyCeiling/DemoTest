# DemoTest
Пример задачи для технического собеседования

**Задача: «Анализ температурных данных сенсоров»**

**Время:** 1 час

**Язык программирования:** любой (вывод консоль)

**Использование интернета:** не желательно!

---

### Основные требования

1. **Чтение файла**
   При старте приложение загружает CSV-файл и\или JSON-файл и\или данные из базы SQLite с колонками:
   * `timestamp` — метка времени в формате `YYYY-MM-DD HH:MM:SS`
   * `sensor_id` — строковый идентификатор сенсора
   * `temperature` — число (°C)

2. **Обработка данных**
   После загрузки программа выполняет два этапа:

   1. **Сводная статистика по каждому сенсору:**
      * минимальная температура
      * максимальная температура
      * средняя температура

   2. **Поиск аномалий:**
      * аномальным считать любое значение, выходящее за пределы `[min–5, max+5]` для данного сенсора
      * где 5°C — фиксированный порог

3. **Вывод результатов**
   * **На консоль**:
     ```
     Сводная статистика:
     sensor1 | min=15.2 | max=28.7 | avg=22.3
     sensor2 | min=14.8 | max=27.5 | avg=21.9
     Найдено 4 аномальных записи.
     ```

---

### Дополнительные требования (выполняется по желанию)

* **Поддержка разных форматов входных файлов**:  
  Программа должна уметь загружать данные не только из CSV, но и из:
  - **JSON** — массив объектов с полями `timestamp`, `sensor_id`, `temperature`
  - **SQLite** — таблица SensorData с теми же колонками

* **Автоматическое определение формата**:  
  Формат файла определяется по расширению (`.csv`, `.json`, `.sqlite`, `.db`).

* **Пример структуры JSON**:
  ```json
  [
    {"timestamp": "2024-06-01 12:00:00", "sensor_id": "sensorA", "temperature": 22.5},
    {"timestamp": "2024-06-01 12:05:00", "sensor_id": "sensorA", "temperature": 23.1}
  ]
  ```

* **Пример структуры таблицы SQLite**:  
  Таблица SensorData с колонками: `timestamp` (TEXT), `sensor_id` (TEXT), `temperature` (REAL).

---

### Дополнительные задачи (по желанию)

* **Сохранение в файл**: запись аномальных записей в файл `anomalies.csv`
* **Аргументы командной строки**: путь к входному файлу
* **ООП**: создание классов для хранения и обработки данных

---

### Пример запуска и вывода

```bash
$ analyze_temperatures data.csv
Сводная статистика:
sensorA | min=12.3 | max=30.1 | avg=21.7
sensorB | min=11.8 | max=28.5 | avg=20.9
Найдено 7 аномальных записей.
```

---

### Уточнения и рекомендации

- **Структура таблицы SensorData для SQLite:**  
  Таблица должна содержать три поля:  
  - `timestamp` (TEXT) — метка времени в формате `YYYY-MM-DD HH:MM:SS`  
  - `sensor_id` (TEXT) — идентификатор сенсора  
  - `temperature` (REAL) — температура в градусах Цельсия

- **Обработка ошибок:**  
  Если входной файл не найден, имеет неподдерживаемый формат или содержит некорректные строки, программа должна выводить понятное сообщение об ошибке и завершать работу.

- **Валидация данных:**  
  Если строка содержит пустые или некорректные значения (например, нечисловая температура), она должна быть пропущена с сообщением в консоль или лог.

- **Выходные файлы:**  
  Все выходные файлы (например, anomalies.csv) должны сохраняться в ту же папку, что и входной файл, если не указано иное.

- **Обработка нескольких сенсоров:**  
  Если в данных присутствует несколько сенсоров, статистика и поиск аномалий выполняются отдельно для каждого сенсора.
